(this["webpackJsonp2.20"]=this["webpackJsonp2.20"]||[]).push([[0],{21:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var s=t(2),o=t.n(s),r=t(16),c=t.n(r),a=(t(21),t(3)),u=t(0),l=function(e){var n=e.newSearch,t=e.handleNewSearch;return Object(u.jsxs)("div",{children:["filter to show with: ",Object(u.jsx)("input",{value:n,onChange:t})]})},i=function(e){var n=e.persons,t=e.newSearch,s=e.rmFunction;return 1===n.length&&""===n[0].name&&""===n[0].number?null:Object(u.jsx)("div",{children:n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})).map((function(e){return Object(u.jsx)(d,{person:e,rmFunction:s},e.id)}))})},d=function(e){var n=e.person,t=e.rmFunction;return Object(u.jsxs)("div",{className:"person",children:[Object(u.jsxs)("p",{children:[n.name," ",n.number]},n.name),Object(u.jsx)("button",{onClick:function(){return t(n)},children:"delete"})]})},h=function(e){var n=e.message;return null===n?null:Object(u.jsx)("div",{className:"success",children:n})},b=function(e){var n=e.message;return null===n?null:Object(u.jsx)("div",{className:"failure",children:n})},j=function(e){var n=e.addName,t=e.newName,s=e.handleNewName,o=e.newNumber,r=e.handleNewNumber;return Object(u.jsx)("div",{children:Object(u.jsxs)("form",{onSubmit:n,children:[Object(u.jsxs)("div",{children:["name: ",Object(u.jsx)("input",{value:t,onChange:s}),"number: ",Object(u.jsx)("input",{value:o,onChange:r})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]})})},m=t(4),f=t.n(m),p="/api/persons/",g={getAllPersons:function(){return f.a.get(p)},postPerson:function(e){return f.a.post(p,e)},rmPerson:function(e){return f.a.delete(p+e.id)},changePerson:function(e,n){return f.a.put(p+e.id,n)}},O=function(){var e=Object(s.useState)([{name:"",number:""}]),n=Object(a.a)(e,2),t=n[0],o=n[1],r=Object(s.useState)(""),c=Object(a.a)(r,2),d=c[0],m=c[1],f=Object(s.useState)(""),p=Object(a.a)(f,2),O=p[0],v=p[1],w=Object(s.useState)(""),x=Object(a.a)(w,2),S=x[0],N=x[1],C=Object(s.useState)(null),q=Object(a.a)(C,2),P=q[0],F=q[1],y=Object(s.useState)(null),k=Object(a.a)(y,2),L=k[0],R=k[1],T=function(){setTimeout((function(){F(null)}),5e3)},D=function(){setTimeout((function(){R(null)}),5e3)},E=function(){return g.getAllPersons().then((function(e){o(e.data)})).catch((function(e){e.response?(R("Server responded, but there was another fault.\nCheck your console."),console.log(e.response.data),console.log(e.response.headers),console.log(e.response.status)):e.request?(R("Request made to fetch persons, but no response received.\nSee console."),console.log(e.request)):(R("Error: ",e.message),console.log(e.message)),D()}))};Object(s.useEffect)(E,[]);return Object(u.jsxs)("div",{children:[Object(u.jsx)(h,{message:P}),Object(u.jsx)(b,{message:L}),Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(j,{addName:function(e){e.preventDefault();var n={name:d,number:O},s=t.filter((function(e){return e.name.toLowerCase()===d.toLowerCase()}));if(s.length>0){var r="".concat(s[0].name," is already in the list.\nWanna change number?");window.confirm(r)&&g.changePerson(s[0],n).then((function(e){o(t.map((function(n){return n.id!==e.data.id?n:e.data}))),F("Changed ".concat(e.data.name)),T()})).catch((function(e){e.response?(R("".concat(e.response.data.error)),D(),console.log(e.response.data),console.log(e.response.headers),console.log(e.response.status)):e.request?(R("Request to edit person sent, but no response.\nSee console."),console.log(e.request)):R(e.message),D()}))}else g.postPerson(n).then((function(e){o(t.concat(e.data)),F("Person added."),T()})).catch((function(e){e.response?(R("".concat(e.response.data.error)),console.log(e.response.data),console.log(e.response.headers),console.log(e.response.status)):e.request?(R("Request to add person sent, but no response.\nSee console."),console.log(e.request)):R(e.message),D()}));m(""),v("")},newName:d,handleNewName:function(e){m(e.target.value)},newNumber:O,handleNewNumber:function(e){v(e.target.value)}}),Object(u.jsx)("h2",{children:"Numbers"}),Object(u.jsx)(l,{newSearch:S,handleNewSearch:function(e){N(e.target.value)}}),Object(u.jsx)(i,{newSearch:S,persons:t,rmFunction:function(e){var n="Delete ".concat(e.name,"?");window.confirm(n)&&g.rmPerson(e).then((function(n){204===n.status&&(o(t.filter((function(n){return n.id!==e.id}))),F("Removed ".concat(e.name)),T())})).catch((function(e){e.response?(R("Server responded, but there was another fault (person probably already removed).\nCheck your console."),console.log(e.response.data),console.log(e.response.headers),console.log(e.response.status)):e.request?(R("Requested removal of person, but no response.\nSee console."),console.log(e.request)):R(e.message),D(),E()}))}})]})},v=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,42)).then((function(n){var t=n.getCLS,s=n.getFID,o=n.getFCP,r=n.getLCP,c=n.getTTFB;t(e),s(e),o(e),r(e),c(e)}))};c.a.render(Object(u.jsx)(o.a.StrictMode,{children:Object(u.jsx)(O,{})}),document.getElementById("root")),v()}},[[41,1,2]]]);
//# sourceMappingURL=main.c85ead4b.chunk.js.map